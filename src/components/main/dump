let isMouseOverCube = false;
let lastMouseX = 0;

const onMouseMove = (event) => {
    if (!isMouseOverCube) return;

    const deltaX = event.clientX - lastMouseX;
    lastMouseX = event.clientX;

    // Rotate cube based on mouse movement
    gsap.to(cube.rotation, {
        y: `+=${deltaX * 0.2}`, // Adjust speed by modifying 0.01
        duration: 0.3,
        ease: "power2.out",
    });
};

const onMouseEnter = () => {
    isMouseOverCube = true;
};

const onMouseLeave = () => {
    isMouseOverCube = false;
};

// Add event listeners
window.addEventListener("mousemove", onMouseMove);

// Raycaster to detect mouse hover on cube
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();

window.addEventListener("mousemove", (event) => {
    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

    raycaster.setFromCamera(mouse, camera);
    const intersects = raycaster.intersectObject(cube, true);

    if (intersects.length > 0) {
        if (!isMouseOverCube) {
            onMouseEnter();
        }
    } else {
        onMouseLeave();
    }
});